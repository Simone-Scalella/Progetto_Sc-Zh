package univpm.esempio.model;

import org.json.JSONObject;
import org.json.JSONArray;
import com.google.gson.Gson;

/**
 * <p>
 * <b>Classe</b> Per la gestione della richiesta dati di un post
 * </p> 
 * @author Zhang Yihang & Simone Scalella
 * @version 0.9
 * @see univpm.esempio.model.page_post
 */

public class page_post  {
	
	/**
	 * questa classe serve per ricevere l'Id di ogni post dentro la pagina
	 */
	public class property{
		/**
		 * attributo della classe property
		 */
		private String id = "";
		/**
		 * costruttore vuoto della classe property
		 */
		public property () {};
		/**
		 * 
		 * @return questo e' il metodo getter per utilizzare l'attributo private Id
		 */
		public String getId() {return id;}
		
	}
	/**
	 * 
	 * all'interno di questa classe vengono salvati alcuni dati del post specificati di seguito 
	 *
	 */

	public class Impression{
		/**
		 * Il numero di volte in cui un contenuto della tua Pagina o relativo alla tua Pagina è apparso nello schermo di una persona.
		 */
		private int impressions = 0;
		/**
		 * Il numero di persone in cui un contenuto della tua Pagina o relativo alla tua Pagina è apparso nello schermo.
		 */
		private int unique_impression = 0;
		/**
		 * media tra il numero di e il numero di persone in cui un contenuto della tua Pagina o relativo alla tua Pagina è apparso nello schermo.
		 */
		private float impressions_per_person = 0;
		/**
		 * costruttore vuoto della classe Impression
		 */
		public Impression() {};
		/**
		 * metodo che assegna all'attributo precedente il suo effettivo valore 
		 */
		public void update() {impressions_per_person = (float)impressions/(float)unique_impression;}
		/**
		 * 
		 * @return metodo getter che ci restituisce l'attributo privato impressions
		 */
		public int getImpressions() {return impressions;}
		/**
		 * 
		 * @param impression dato di tipo INT derivato dal JSONObject ottenuto tramite la get all'API della pagina Facebook
		 */
		public void setImpression(int impression) {this.impressions = impression;}
		/**
		 * 
		 * @return
		 */
		public int getUnique_impression() {return unique_impression;}
		public void setImpression_unique(int unique_impression) {this.unique_impression = unique_impression;}
		public float getImpressions_per_person() {return impressions_per_person;}
		
		
	}
	
	public class Reactions{
		private int like= 0;
		private int wow = 0;
		private int love = 0;
		private int care = 0;
		private int haha = 0;
		private int total_impression = 0;
		
		public Reactions() {};
		public void update(){total_impression = like+wow+love+care+haha;}
		
		public int getlike() {return like;}
		public int getwow() {return wow;}
		public int getlove() {return love;}		
		public int getcare(){return care;}		
		public int gethaha() {return haha;}
		public int gettotal_impression() {return total_impression;}
		
	}
	
	
	
	private Reactions  Reactions_01 = new Reactions();
	private Impression Impression_01 = new Impression();
	private property property_01 = new property();
	
	public page_post (JSONObject post) {
		
		Gson temp_act = new Gson();
		JSONArray data_array = post.getJSONObject("insights").getJSONArray("data");
		Reactions_01= temp_act.fromJson(data_array.getJSONObject(2).getJSONArray("values").getJSONObject(0).getJSONObject("value").toString(),Reactions.class);
		property_01= temp_act.fromJson(post.toString(),property.class);
		Impression_01.setImpression(data_array.getJSONObject(0).getJSONArray("values").getJSONObject(0).getInt("value"));
		Impression_01.setImpression_unique(data_array.getJSONObject(1).getJSONArray("values").getJSONObject(0).getInt("value"));
		Impression_01.update();
		Reactions_01.update();
		
		
	}
	
	public page_post() {};	
	public Reactions getReactions_01() {return Reactions_01;}
	public void setReactions_01(Reactions reactions_01) {Reactions_01 = reactions_01;}
	public Impression getImpression_01() {return Impression_01;}
	public void setImpression_01(Impression impression_01) {Impression_01 = impression_01;}
	public property getProperty_01() {return property_01;}	
}

